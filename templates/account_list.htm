{{ define "title" }}帳號管理{{ end }}
{{ define "content-with-session" }}
<script src="/js/delete.js"></script>
<script src="/js/update.js"></script>
<h1>帳號管理</h1>
{{ $acct := .Account }}
<table>
    <tr>
        <th>帳號</th>
        <th>姓名</th>
        <th>班級</th>
        <th>座號</th>
        <th>權限</th>
        {{ if eq $acct.Role 1 }}
        <th></th>
        <th></th>
        <th></th>
        {{ end }}
    </tr>
    <tbody>
        {{ range .Data }}
        <tr>
            <td>{{ .ID }}</td>
            <td>{{ .Name }}</td>
            <td>{{ .Class }}</td>
            <td>{{ .Number }}</td>
            <td>{{ .Role }}</td>
            {{ if eq $acct.Role 1 }}
            <td>
                {{ if eq .Role 2 }}
                <button value="{{ .ID }}" onclick="update(this, 1, '')">設為管理員</button>
                {{ else if ne .ID "admin" }}
                <button value="{{ .ID }}" onclick="update(this, 2, '')">設為編輯者</button>
                {{ end }}
            </td>
            <td>
                <button value="{{ .ID }}" onclick="resetPassword(this)">重設密碼</button>
            </td>
            <td>
                {{ if ne .ID "admin" }}
                <button value="{{ .ID }}" onclick="deleteRow(this, 'accounts')">刪除帳號</button>
                {{ end }}
            </td>
            {{ end }} 
        </tr>
        {{ end }}
    </tbody>
</table>
{{ end }}