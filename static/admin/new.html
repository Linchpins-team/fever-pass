<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <title>新增紀錄</title>
    </head>
    <body>
        <h1>新增紀錄</h1>
        <form action="" id="form">
            User ID:<input type="text" name="user_id">
            通過 <input type="checkbox" name="pass" id="" value="true" checked>
            <input type="submit" value="送出">
        </form>
        <script>
            form = document.getElementById("form")
            form.onsubmit = function(ev) {
                newRecord(form)
                ev.preventDefault()
            }
            function newRecord(form) {
                fetch("/api/records", {
                    credentials: "include",
                    method: "post",
                    body: new FormData(form),
                })
                .then(response => {
                    switch (response.status) {
                        case 200:
                            console.log("success")
                            // add this record to thing here
                            break
                        case 401:
                            throw response.text()
                            break
                        case 415:
                            throw response.text()
                            break
                    }
                })
                .catch(error => {
                    alert(error)
                })
            }
        </script>
    </body>
</html>